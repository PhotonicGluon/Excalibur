Changed key generation process to include username and API URL
