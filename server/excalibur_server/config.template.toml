##########################################################################
#      ________   _______          _      _____ ____  _    _ _____       #
#     |  ____\ \ / / ____|   /\   | |    |_   _|  _ \| |  | |  __ \      #
#     | |__   \ V / |       /  \  | |      | | | |_) | |  | | |__) |     #
#     |  __|   > <| |      / /\ \ | |      | | |  _ <| |  | |  _  /      #
#     | |____ / . \ |____ / ____ \| |____ _| |_| |_) | |__| | | \ \      #
#     |______/_/ \_\_____/_/    \_\______|_____|____/ \____/|_|  \_\     #
#                                                                        #
#                  Excalibur Server Configuration File                   #
#                                                                        #
##########################################################################

# Config file version. DO NOT EDIT THIS FIELD!
version = 1

[server]
# The vault folder relative to the root folder
vault_folder = "vault"

# The database file path, relative to the root folder
database_file = "excalibur.duckdb"

# The maximum file size, in bytes, that can be uploaded
max_file_size = 52_428_800 # 50 MiB

# The chunk size, in bytes, to use when processing files (e.g., saving to disk)
file_process_chunk_size = 4096 # 4 KiB

[security]
# SRP group size
# Valid values (case insensitive): "small", "medium", "large"
srp_group = "small"

# How long a login session lasts, in seconds
login_validity_time = 3600 # 1 hour

[api]
# The allowed origins for CORS
allow_origins = [
    "capacitor://localhost", # Capacitor on iOS
    "http://localhost",      # Capacitor on Android
    "http://localhost:5173", # Vite development server
    "http://localhost:8100", # Local development server for Ionic
]

[api.rate_limit]
# The capacity of the rate limiter
capacity = 20

# The refill rate of the rate limiter, in tokens per second
refill_rate = 1

[api.logging]
# The directory to store logs in
logs_dir = "logs"

# The default log format
default_format = "[%(asctime)s] %(levelprefix)s %(message)s"

# The log format for any webpage access
access_format = '[%(asctime)s] %(levelprefix)s %(client_addr)s - "%(request_line)s" %(status_code)s'

# Log format when writing to file
file_format = "[%(asctime)s] %(levelname)s - %(message)s"

# The API endpoints to not log
no_log = ["/api/well-known/heartbeat"]
